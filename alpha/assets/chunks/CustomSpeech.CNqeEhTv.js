import{d as B,p as i,h as U,c as d,o as s,j as l,e as v,a2 as M,af as m,b6 as P,al as k,a as $,am as C,t as y,b as E,k as H,F as R,B as F}from"./framework.CdlzW3Za.js";import{w as N}from"./theme.C_-hLVRq.js";import{A as D,a as G,B as W,M as L}from"./speechHandlers.BnEXGotK.js";const j={style:{display:"flex","flex-direction":"column",gap:"20px"}},q={style:{padding:"16px",background:"#f5f5f5","border-radius":"8px"}},J={style:{"margin-bottom":"12px"}},O={key:0,style:{display:"grid","grid-template-columns":"1fr 1fr",gap:"12px","margin-bottom":"12px"}},Q={key:1,style:{display:"grid","grid-template-columns":"1fr 1fr",gap:"12px","margin-bottom":"12px"}},X={style:{display:"flex",gap:"12px","align-items":"center"}},Y={style:{display:"flex","align-items":"center",gap:"4px","font-size":"14px"}},Z={key:0,style:{padding:"12px",background:"#e8f4fd","border-radius":"6px","border-left":"4px solid #1890ff"}},_={style:{"font-weight":"500",color:"#1890ff"}},ee={key:0,style:{"margin-top":"8px",color:"#666","font-style":"italic"}},le={key:1,style:{padding:"12px",background:"#fff2f0","border-radius":"6px","border-left":"4px solid #ff4d4f"}},te={style:{"margin-top":"4px",color:"#666"}},ae={key:2,style:{padding:"16px",background:"#f9f9f9","border-radius":"8px"}},oe={style:{"max-height":"200px","overflow-y":"auto"}},ie={style:{"font-size":"12px",color:"#999","margin-bottom":"4px"}},ue=B({__name:"CustomSpeech",setup(se){const o=i("aliyun"),f=i(""),b=i(""),x=i(""),g=i(""),c=i(!1),h=i(""),u=i(""),n=i(""),p=i(""),r=i([]),S=U(()=>{let t;switch(o.value){case"baidu":t=W.createWithGetters(()=>f.value,()=>b.value);break;case"aliyun":t=G.createWithGetters(()=>x.value,()=>g.value);break;case"aliyun-realtime":t=D.createWithGetters(()=>x.value,()=>g.value);break;case"mock":default:t=new L;break}return{mode:"custom",customHandler:t,autoReplace:c.value,interimResults:o.value==="aliyun-realtime"||o.value==="mock"}}),K=()=>{u.value="🎤 正在录音...",n.value="",p.value=""},A=t=>{n.value=t},w=t=>{u.value="✅ 识别完成",n.value="",r.value.unshift({text:t,timestamp:new Date().toLocaleTimeString(),mode:c.value?"替换模式":"追加模式"}),r.value.length>10&&(r.value=r.value.slice(0,10))},V=()=>{u.value="",n.value=""},T=t=>{u.value="",n.value="",p.value=t.message,o.value==="baidu"&&(t.message.includes("API Key")||t.message.includes("Secret Key"))?p.value=`${t.message}
当前API Key: ${f.value?"已设置":"未设置"}
当前Secret Key: ${b.value?"已设置":"未设置"}`:(o.value==="aliyun"||o.value==="aliyun-realtime")&&(t.message.includes("AppKey")||t.message.includes("Token"))&&(p.value=`${t.message}
当前AppKey: ${x.value?"已设置":"未设置"}
当前Token: ${g.value?"已设置":"未设置"}`),setTimeout(()=>{p.value=""},5e3)},I=t=>{console.log("提交内容:",t)};return(t,e)=>(s(),d("div",j,[l("div",q,[e[14]||(e[14]=l("h4",{style:{margin:"0 0 12px 0"}},"语音识别配置",-1)),l("div",J,[e[8]||(e[8]=l("label",{style:{display:"block","margin-bottom":"4px","font-size":"14px"}},"选择服务商:",-1)),m(l("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>o.value=a),style:{width:"100%",padding:"8px",border:"1px solid #ddd","border-radius":"4px"}},[...e[7]||(e[7]=[l("option",{value:"baidu"},"百度语音识别",-1),l("option",{value:"aliyun"},"阿里云一句话识别",-1),l("option",{value:"aliyun-realtime"},"阿里云实时语音识别",-1),l("option",{value:"mock"},"模拟演示",-1)])],512),[[P,o.value]])]),o.value==="baidu"?(s(),d("div",O,[l("div",null,[e[9]||(e[9]=l("label",{style:{display:"block","margin-bottom":"4px","font-size":"14px"}},"API Key:",-1)),m(l("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>f.value=a),type:"text",placeholder:"请输入百度 API Key",style:{width:"100%",padding:"8px",border:"1px solid #ddd","border-radius":"4px"}},null,512),[[k,f.value]])]),l("div",null,[e[10]||(e[10]=l("label",{style:{display:"block","margin-bottom":"4px","font-size":"14px"}},"Secret Key:",-1)),m(l("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>b.value=a),type:"password",placeholder:"请输入百度 Secret Key",style:{width:"100%",padding:"8px",border:"1px solid #ddd","border-radius":"4px"}},null,512),[[k,b.value]])])])):v("",!0),o.value==="aliyun"||o.value==="aliyun-realtime"?(s(),d("div",Q,[l("div",null,[e[11]||(e[11]=l("label",{style:{display:"block","margin-bottom":"4px","font-size":"14px"}},"AppKey:",-1)),m(l("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>x.value=a),type:"text",placeholder:"请输入阿里云 AppKey",style:{width:"100%",padding:"8px",border:"1px solid #ddd","border-radius":"4px"}},null,512),[[k,x.value]])]),l("div",null,[e[12]||(e[12]=l("label",{style:{display:"block","margin-bottom":"4px","font-size":"14px"}},"Token:",-1)),m(l("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>g.value=a),type:"password",placeholder:"请输入阿里云 Token",style:{width:"100%",padding:"8px",border:"1px solid #ddd","border-radius":"4px"}},null,512),[[k,g.value]])])])):v("",!0),l("div",X,[l("label",Y,[m(l("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>c.value=a),type:"checkbox"},null,512),[[C,c.value]]),e[13]||(e[13]=$(" 替换模式 (否则为追加模式) ",-1))])])]),u.value?(s(),d("div",Z,[l("div",_,y(u.value),1),n.value?(s(),d("div",ee," 实时识别: "+y(n.value),1)):v("",!0)])):v("",!0),p.value?(s(),d("div",le,[e[15]||(e[15]=l("div",{style:{"font-weight":"500",color:"#ff4d4f"}},"错误信息",-1)),l("div",te,y(p.value),1)])):v("",!0),l("div",null,[e[16]||(e[16]=l("h4",null,"自定义语音识别输入框",-1)),(s(),E(H(N),{key:o.value,modelValue:h.value,"onUpdate:modelValue":e[6]||(e[6]=a=>h.value=a),mode:"single",allowSpeech:!0,speech:S.value,placeholder:"点击麦克风按钮开始语音输入，或直接键盘输入...",onSpeechStart:K,onSpeechInterim:A,onSpeechFinal:w,onSpeechEnd:V,onSpeechError:T,onSubmit:I},null,8,["modelValue","speech"]))]),r.value.length>0?(s(),d("div",ae,[e[17]||(e[17]=l("h4",{style:{margin:"0 0 12px 0"}},"识别历史",-1)),l("div",oe,[(s(!0),d(R,null,F(r.value,(a,z)=>(s(),d("div",{key:z,style:{padding:"8px","margin-bottom":"8px",background:"white","border-radius":"4px","border-left":"3px solid #52c41a"}},[l("div",ie,y(a.timestamp)+" - "+y(a.mode),1),l("div",null,y(a.text),1)]))),128))])])):v("",!0),e[18]||(e[18]=M('<div style="padding:16px;background:#fffbe6;border-radius:8px;border-left:4px solid #faad14;"><h4 style="margin:0 0 8px 0;color:#fa8c16;">使用说明</h4><ul style="margin:0;padding-left:20px;color:#666;"><li><strong>百度语音识别:</strong> 需要输入 API Key 和 Secret Key</li><li><strong>阿里云一句话识别:</strong> 需要输入 AppKey 和 Token，适合短语音识别</li><li><strong>阿里云实时语音识别:</strong> 需要输入 AppKey 和 Token，支持实时流式识别和中间结果</li><li><strong>模拟演示:</strong> 无需真实 API 配置，可体验功能流程</li><li>替换模式：每次语音识别会覆盖输入框内容</li><li>追加模式：语音识别结果会追加到现有内容后面</li><li>支持键盘和语音混合输入</li></ul></div>',1))]))}});export{ue as default};
