import{U as ee,Q as ce,S as I,J as fe,X as de,M as pe}from"./index2.eHSojToQ.js";import{f as me,b as ve}from"./index3.BztjNEeJ.js";import{s as ge}from"./utils.BIHqGXjM.js";import{s as D}from"./plugin-vue_export-helper.lGy7RumW.js";import{d as G,aB as W,aC as te,h as _,p as b,q as M,b as P,o as h,w as V,j as F,c as B,F as N,B as O,t as le,r as $,k as oe,x as he,a1 as re,H as J,e as U,n as A,aJ as H,G as K,T as ye,P as Y}from"./framework.DrGfhPAt.js";import{g as _e}from"./tiny-robot-svgs.BbDZZ-ON.js";const Z=(e,o)=>e.x>=o.left&&e.x<=o.right&&e.y>=o.top&&e.y<=o.bottom,xe=(e,o,w=!1)=>{if(o.length<3)return!1;const u=e.x,p=e.y;let v=!1;const t=(a,s,i,n,f,l)=>{const g=(f-i)*(s-n)-(l-n)*(a-i);if(Math.abs(g)>1e-10)return!1;const d=Math.min(i,f),x=Math.max(i,f),T=Math.min(n,l),R=Math.max(n,l);return a>=d&&a<=x&&s>=T&&s<=R};for(let a=0,s=o.length-1;a<o.length;s=a++){const i=o[a].x,n=o[a].y,f=o[s].x,l=o[s].y;if(w&&t(u,p,i,n,f,l))return!0;if(n>p&&l<=p||l>p&&n<=p){const g=(f-i)*(p-n)/(l-n)+i;u<g&&(v=!v)}}return v},we=(e,o)=>o.bottom<e.top?[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:o.right,y:o.bottom},{x:o.left,y:o.bottom}]:o.top>e.bottom?[{x:e.left,y:e.bottom},{x:e.right,y:e.bottom},{x:o.right,y:o.top},{x:o.left,y:o.top}]:[],{x:ke,y:be}=ge(),Be=(e,o,w)=>{const{delayEnter:u=0,delayLeave:p=0}=w||{},v=b(!1),t=b("outside");let a=null;const s=()=>{a&&(clearTimeout(a),a=null)};he(()=>{s()});const i=n=>{const f=n?u:p;s(),f?a=setTimeout(()=>v.value=n,f):v.value=n};return M(t,n=>{["trigger","popper","polygon"].includes(n)?i(!0):i(!1)},{immediate:!0}),ce([ke,be],([n,f])=>{const l=I(e),g=I(o),d=l==null?void 0:l.getBoundingClientRect(),x=g==null?void 0:g.getBoundingClientRect();if(d&&Z({x:n,y:f},d)){t.value="trigger";return}if(x&&Z({x:n,y:f},x)){t.value="popper";return}if(!d||!x||d.width===0||d.height===0||x.width===0||x.height===0){t.value="outside";return}xe({x:n,y:f},we(d,x),!0)?t.value="polygon":t.value="outside"},{throttle:10}),v},Me={class:"tr-dropdown-menu__list"},Ce=["onClick"],Te=G({__name:"index",props:W({appendTo:{},items:{},show:{type:Boolean},trigger:{default:"click"}},{show:{type:Boolean,default:!1},showModifiers:{}}),emits:W(["item-click","click-outside"],["update:show"]),setup(e,{expose:o,emit:w}){const u=e,p=w,v=te(e,"show"),t=_({get:()=>u.trigger==="manual"?u.show:v.value,set:l=>{u.trigger!=="manual"&&(v.value=l)}}),a=b(null),s=_(()=>{var l;return(l=a.value)==null?void 0:l.triggerRef}),i=_(()=>{var l;return(l=a.value)==null?void 0:l.popperRef});if(u.trigger==="click"||u.trigger==="manual")ee(i,l=>{p("click-outside",l),t.value=!1},{ignore:[s]});else if(u.trigger==="hover"){const l=Be(s,i,{delayEnter:100,delayLeave:100});M(l,g=>{t.value=g})}const n=()=>{u.trigger==="click"&&(t.value=!t.value)},f=l=>{t.value=!1,p("item-click",l)};return o({update:()=>{var l;(l=a.value)==null||l.update()}}),(l,g)=>(h(),P(oe(me),{show:t.value,class:"tr-dropdown-menu",ref_key:"basePopperRef",ref:a,placement:"top-left","append-to":u.appendTo,offset:8,"transition-props":{name:"tr-dropdown-menu"},"prevent-overflow":!0,"trigger-events":{onClick:n}},{trigger:V(()=>[$(l.$slots,"trigger",{},void 0,!0)]),content:V(()=>[F("ul",Me,[(h(!0),B(N,null,O(u.items,d=>(h(),B("li",{class:"tr-dropdown-menu__list-item",key:d.id,onClick:x=>f(d)},le(d.text),9,Ce))),128))])]),_:3},8,["show","append-to","trigger-events"]))}}),E=D(Te,[["__scopeId","data-v-8d480727"]]);E.name="TrDropdownMenu";const Re=function(e){e.component(E.name,E)};E.install=Re;const Se={key:0},Ae=G({__name:"PillButton",props:{item:{}},setup(e){const o=e,w=re(),u=_(()=>{var t;return!!(w.icon||(t=o.item)!=null&&t.icon)}),p=_(()=>{var t;return!!(w.default||(t=o.item)!=null&&t.text)}),v=_(()=>u.value&&!p.value);return(t,a)=>(h(),B("button",{class:A(["tr-suggestion-pills__item",{"only-icon":v.value}])},[$(t.$slots,"icon",{},()=>{var s;return[(h(),P(J((s=t.item)==null?void 0:s.icon),{class:"tr-suggestion-pills__item_icon"}))]},!0),$(t.$slots,"default",{},()=>{var s;return[(s=t.item)!=null&&s.text?(h(),B("span",Se,le(t.item.text),1)):U("",!0)]},!0)],2))}}),C=D(Ae,[["__scopeId","data-v-5c433c31"]]),Ie={class:"tr-suggestion-pills__more-wrapper"},We=G({__name:"index",props:W({showAll:{type:Boolean},showAllButtonOn:{default:"hover"},overflowMode:{default:"expand"},autoScrollOn:{}},{showAll:{type:Boolean,default:!1},showAllModifiers:{}}),emits:W(["click-outside"],["update:showAll"]),setup(e,{expose:o,emit:w}){const u=e,p=re(),v=w,{vnodes:t}=ve(p.default,!0),a=te(e,"showAll"),s=b(null),i=b(null),n=b(null),{width:f}=fe(i),l=b(0),g=_(()=>u.overflowMode==="expand"&&f.value<l.value),d=b(-1),x=_(()=>g.value&&a.value?t.value.slice(0,d.value):t.value),T=_(()=>g.value&&a.value?t.value.slice(d.value).map((r,c)=>({vnode:r,index:c+d.value})):[]),R=b([]),Q=b([]),X=_(()=>R.value.map(r=>I(r)).filter(r=>r instanceof Element)),ae=_(()=>Q.value.map(r=>I(r)).filter(r=>r instanceof Element)),q=()=>{const r=i.value,c=n.value;return Array.from((r==null?void 0:r.children)||[]).concat(Array.from((c==null?void 0:c.children)||[]))},z=()=>{Y(()=>{const r=i.value;if(!r)return;const c=q(),m=parseFloat(getComputedStyle(r).rowGap)||0;d.value=-1;let y=0;for(let k=0;k<c.length;k++)if(y+=c[k].offsetWidth,k>0&&(y+=m),y>r.clientWidth){d.value=k;break}})};M(t,()=>{Y(()=>{if(!i.value)return;const r=q(),c=parseFloat(getComputedStyle(i.value).rowGap)||0;l.value=r.reduce((m,y,k)=>m+y.offsetWidth+(k>0?c:0),0)})},{immediate:!0}),M(t,z),de(f,z,{debounce:100});const ne=()=>{a.value=!a.value};ee(s,r=>{a.value&&v("click-outside",r)});const se=r=>{const c=i.value;if(!c)return;const m=r.offsetLeft,y=m+r.offsetWidth,k=c.scrollLeft,j=c.clientWidth,ie=m<k,ue=y>k+j;ie?c.scrollTo({left:m,behavior:"smooth"}):ue&&c.scrollTo({left:y-j,behavior:"smooth"})};let S=null;return M(()=>u.autoScrollOn,r=>{S&&(S(),S=null),r&&(S=pe(X,r,c=>{c.currentTarget&&se(c.currentTarget)}))},{immediate:!0}),o({children:_(()=>X.value.concat(ae.value))}),(r,c)=>(h(),B("div",{class:"tr-suggestion-pills__wrapper",ref_key:"containerWrapperRef",ref:s},[F("div",{class:A(["tr-suggestion-pills__container",{"overflow-scroll":u.overflowMode==="scroll"}]),ref_key:"containerRef",ref:i},[(h(!0),B(N,null,O(x.value,(m,y)=>(h(),P(J(m),{key:H(m)?m.key:y,ref_for:!0,ref_key:"staticMaybeItemRefs",ref:R}))),128))],2),F("div",Ie,[K(ye,{name:"tr-suggestion-pills__more"},{default:V(()=>[T.value.length?(h(),B("div",{key:0,class:"tr-suggestion-pills__more",ref_key:"floatingItemsRef",ref:n},[(h(!0),B(N,null,O(T.value,({vnode:m,index:y})=>(h(),P(J(m),{key:H(m)?m.key:y,ref_for:!0,ref_key:"floatingMaybeItemRefs",ref:Q}))),128))],512)):U("",!0)]),_:1})]),g.value?(h(),B("button",{key:0,class:A(["tr-suggestion-pills__expand",{"show-on-hover":u.showAllButtonOn==="hover"}]),onClick:ne},[K(oe(_e),{class:A(["tr-suggestion-pills__expand-icon",{rotate:a.value}])},null,8,["class"])],2)):U("",!0)],512))}}),L=D(We,[["__scopeId","data-v-ebbd7a00"]]);L.name="TrSuggestionPills";const Pe=function(e){e.component(L.name,L)};L.install=Pe;C.name="TrSuggestionPillButton";const Ee=function(e){e.component(C.name,C)};C.install=Ee;const Je=C;export{Je as R,L as k,E as v};
