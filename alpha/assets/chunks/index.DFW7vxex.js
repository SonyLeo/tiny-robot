import{d as H,aB as Q,aC as le,q as W,p as u,h as w,c,o as a,j as h,F as K,B as te,e as N,n as E,b as x,H as X,t as F,P as me,w as V,r as B,G as A,k as R,a as _e,N as ae,T as ge}from"./framework.DrGfhPAt.js";import{a as ye,x as we,d as he}from"./tiny-robot-svgs.BbDZZ-ON.js";import{J as oe,U as se,B as ke,Z as be,Q as Te,q as qe}from"./index2.BzGNBP-0.js";import{c as Me,a as xe,f as Ce}from"./index3.D5Qu25Vj.js";import{s as I}from"./plugin-vue_export-helper.lGy7RumW.js";import{t as Be}from"./index.waylIDgf.js";import{A as $e}from"./loading.CaA-rOal.js";import{l as Re}from"./no-data.C5XPNTdz.js";import{e as J}from"./utils.nxwM3ABj.js";const Ne=["onClick"],Ie={key:0,class:"tr-flow-layout__item-label"},Le={class:"tr-flow-layout__dropdown-wrapper"},Se=["onClick"],Ge={class:"tr-flow-layout__item-label"},We=H({__name:"index",props:Q({items:{},selected:{},linesLimit:{default:Number.MAX_SAFE_INTEGER},moreIcon:{default:ye},showMoreTrigger:{default:"click"}},{selected:{},selectedModifiers:{}}),emits:Q(["item-click"],["update:selected"]),setup(r,{emit:l}){const i=r,t=le(r,"selected");W(()=>i.items,s=>{!s.find(n=>n.id===t.value)&&s.length&&(t.value=s[0].id)},{immediate:!0});const $=l,p=u(null),_=u(null),k=u(null),q=u([]),v=u(null),f=u(!1),g=u(!1),m=(s,n)=>{s&&(q.value[n]=s)},y=()=>{v.value=null,f.value=!1,me(()=>{const s=p.value,n=_.value;if(!s||!n)return;const o=q.value.slice(0,i.items.length).filter(b=>!!b).map(b=>b.offsetTop),M=Array.from(new Set(o));if(M.length>i.linesLimit){const b=M[i.linesLimit-1],C=o.lastIndexOf(b),z=q.value[C];s.clientWidth-z.offsetLeft-z.offsetWidth-8<n.offsetWidth?v.value=C:v.value=C+1,f.value=!1}else v.value=null,f.value=!0})};W(()=>i.items,y);const{width:L}=oe(p);W(L,s=>{s>0&&y()});const Z=w(()=>v.value!==null?i.items.slice(v.value):[]),O=w(()=>v.value===null?!1:i.items.findIndex(s=>s.id===t.value)>=v.value),j=s=>{t.value=s,g.value=!1,$("item-click",s)},S=()=>{i.showMoreTrigger==="click"&&(g.value=!g.value)},G=s=>{i.showMoreTrigger==="hover"&&(g.value=s)};return se(k,()=>{g.value=!1},{ignore:[k,_]}),(s,n)=>(a(),c("div",{class:"tr-flow-layout",ref_key:"containerRef",ref:p},[(a(!0),c(K,null,te(i.items,(o,M)=>(a(),c(K,{key:o.id},[v.value===null||M<v.value?(a(),c("button",{key:0,class:E(["tr-flow-layout__item",{"icon-only":!o.label},{selected:o.id===t.value}]),ref_for:!0,ref:b=>m(b,M),onClick:b=>j(o.id)},[(a(),x(X(o.icon),{class:"tr-flow-layout__item-icon"})),o.label?(a(),c("span",Ie,F(o.label),1)):N("",!0)],10,Ne)):N("",!0)],64))),128)),h("div",Le,[f.value?N("",!0):(a(),c("button",{key:0,class:E(["tr-flow-layout__item","icon-only",{selected:O.value}]),ref_key:"moreButtonRef",ref:_,onClick:S,onMouseenter:n[0]||(n[0]=o=>G(!0)),onMouseleave:n[1]||(n[1]=o=>G(!1))},[(a(),x(X(i.moreIcon),{class:"tr-flow-layout__item-icon"}))],34)),h("div",{class:"tr-flow-layout__dropdown-container",onMouseenter:n[2]||(n[2]=o=>G(!0)),onMouseleave:n[3]||(n[3]=o=>G(!1))},[g.value?(a(),c("div",{key:0,class:"tr-flow-layout__dropdown",ref_key:"dropDownRef",ref:k},[(a(!0),c(K,null,te(Z.value,o=>(a(),c("button",{class:E(["tr-flow-layout__dropdown_item",{selected:o.id===t.value}]),key:o.id,onClick:M=>j(o.id)},[(a(),x(X(o.icon),{class:"tr-flow-layout__item-icon"})),h("span",Ge,F(o.label),1)],10,Se))),128))],512)):N("",!0)],32)])],512))}}),D=I(We,[["__scopeId","data-v-f82cf3dc"]]);D.name="TrFlowLayout";const Ee=function(r){r.component(D.name,D)};D.install=Ee;const Fe={key:0,class:"tr-question-popover__backdrop"},Oe=H({__name:"Backdrop",props:{show:{type:Boolean}},setup(r){return(l,i)=>l.show?(a(),c("div",Fe)):N("",!0)}}),ze=I(Oe,[["__scopeId","data-v-50205eaf"]]),Pe={class:"tr-question__header"},Ue={key:1,class:"tr-question__header-icon"},Ve={class:"tr-question__header-title"},Ae=H({__name:"Header",props:{icon:{},title:{}},setup(r){const l=r;return(i,t)=>(a(),c("div",Pe,[l.icon?(a(),x(X(l.icon),{key:0})):(a(),c("span",Ue,[A(R(he),{style:{color:"#1476ff"}})])),h("h3",Ve,F(l.title),1)]))}}),Qe=I(Ae,[["__scopeId","data-v-76bef623"]]),De={},He={class:"tr-question__loading-wrapper"};function Ze(r,l){return a(),c("div",He,[B(r.$slots,"default",{},()=>[l[0]||(l[0]=h("img",{class:"tr-question__loading",src:$e},null,-1)),l[1]||(l[1]=h("span",{class:"tr-question__loading-text"},"正在加载",-1))],!0)])}const je=I(De,[["render",Ze],["__scopeId","data-v-5cdf0688"]]),Je={},Ke={class:"tr-question__no-data-wrapper"};function Xe(r,l){return a(),c("div",Ke,[B(r.$slots,"default",{},()=>[l[0]||(l[0]=h("img",{class:"tr-question__no-data",src:Re},null,-1)),l[1]||(l[1]=h("span",{class:"tr-question__no-data-text"},"暂时没有内容",-1))],!0)])}const Ye=I(Je,[["render",Xe],["__scopeId","data-v-a33638dd"]]),et={class:"tr-tooltip-content"},tt=H({__name:"Tooltip",props:Q({show:{type:Boolean},content:{},trigger:{},disabled:{type:Boolean},placement:{},delayOpen:{},delayClose:{}},{show:{type:Boolean,default:!1},showModifiers:{}}),emits:["update:show"],setup(r){const l=r,i=le(r,"show"),t=u(l.show),$=w(()=>l.trigger),{x:p,y:_,width:k,height:q}=qe($),v=w(()=>l.trigger?{left:J(p.value),top:l.placement==="top"?J(_.value):J(_.value+q.value),width:J(k.value)}:{});let f;W(()=>i.value,m=>{const y=m?l.delayOpen:l.delayClose;f&&(clearTimeout(f),f=void 0,m||(t.value=!1)),y?f=setTimeout(()=>t.value=m||!1,y):t.value=m||!1}),W(()=>l.disabled,m=>{m&&(f&&clearTimeout(f),t.value=!1)});const g=m=>{var y;(y=$.value)!=null&&y.contains(m.relatedTarget)||(i.value=!1)};return(m,y)=>(a(),x(ge,{name:"tr-tooltip"},{default:V(()=>[t.value?(a(),c("div",{key:0,class:E(["tr-tooltip",`placement-${l.placement}`]),role:"tooltip",style:ae(v.value),onMouseleave:g},[y[0]||(y[0]=h("div",{class:"tr-tooltip-arrow"},null,-1)),h("span",et,F(l.content),1)],38)):N("",!0)]),_:1}))}}),lt=I(tt,[["__scopeId","data-v-72e44084"]]),at=["onClick","onMouseenter","onMouseleave"],ot=H({__name:"index",props:Q({appendTo:{},data:{},title:{default:"热门问题"},icon:{},show:{type:Boolean},trigger:{default:"click"},selectedGroup:{},groupShowMoreTrigger:{default:"hover"},loading:{type:Boolean},topOffset:{default:8}},{selectedGroup:{},selectedGroupModifiers:{}}),emits:Q(["item-click","group-click","open","close","click-outside"],["update:selectedGroup"]),setup(r,{expose:l,emit:i}){const t=r,$=u(!1),p=w({get:()=>t.trigger==="manual"?t.show:$.value,set:e=>{t.trigger!=="manual"&&($.value=e)}}),_=i,k=le(r,"selectedGroup"),q=w(()=>{var e;return typeof((e=t.data.at(0))==null?void 0:e.group)=="string"});!k.value&&q.value&&t.data.length&&(k.value=t.data[0].group);const v=w(()=>{var e;return q.value?((e=t.data.find(d=>d.group===k.value))==null?void 0:e.items)||[]:t.data}),f=w(()=>q.value?t.data.map(e=>({...e,id:e.group})):[]),g=u(null),m=w(()=>{var e;return(e=g.value)==null?void 0:e.triggerRef}),y=w(()=>{var e;return(e=g.value)==null?void 0:e.popperRef}),L=ke("(max-width: 767px)"),Z=u(null),O=u(!1),{isScrolling:j}=be(Z);Te(j,e=>{O.value=e},{throttle:100,leading:!0,trailing:!0});const S=u([]),G=w(()=>S.value.at(0)),s=(e,d)=>{S.value[d]=e},n=u([]),o=()=>{n.value=S.value.map(e=>e?e.scrollWidth>e.clientWidth:!1)},M=u(null),b=u(null),C=u(!1),z=u(""),{width:re}=oe(G);W(re,()=>{o()});const ne=w(()=>L.value?{left:0,right:0,bottom:0,top:"unset",minWidth:"100%"}:{}),ie=Me(m,t.appendTo);xe(()=>({to:ie.value}),()=>A(ze,{show:p.value&&L.value},null));const ee=()=>{t.trigger==="click"&&(p.value?_("open"):_("close"))};se(y,e=>{_("click-outside",e),p.value=!1,ee()},{ignore:[m]});const ue=()=>{p.value=!p.value,ee()},ce=()=>{p.value=!1,_("close")},de=e=>{_("item-click",e),p.value=!1,ee()},pe=e=>{const d=t.data.find(T=>T.group===e);d&&_("group-click",d)},ve=(e,d)=>{b.value=S.value[d],C.value=!0,z.value=e.text},fe=e=>{var d;((d=M.value)==null?void 0:d.$el).contains(e.relatedTarget)||(C.value=!1)};return l({update:()=>{var e;(e=g.value)==null||e.update()}}),(e,d)=>(a(),x(R(Ce),{show:p.value,class:E(["tr-question-popover",{mobile:R(L)}]),style:ae(ne.value),ref_key:"basePopperRef",ref:g,placement:"top-left","append-to":t.appendTo,offset:t.topOffset,"transition-props":{name:R(L)?"tr-question-popover-mobile":"tr-question-popover"},"prevent-overflow":!0,"trigger-events":{onClick:ue}},{trigger:V(()=>[B(e.$slots,"trigger",{},void 0,!0)]),content:V(()=>[B(e.$slots,"header",{},()=>[A(Qe,{icon:t.icon,title:t.title},null,8,["icon","title"])],!0),t.loading?(a(),x(je,{key:0},{default:V(()=>[B(e.$slots,"loading",{},void 0,!0)]),_:3})):t.data.length===0?(a(),x(Ye,{key:1},{default:V(()=>[B(e.$slots,"empty",{},void 0,!0)]),_:3})):B(e.$slots,"body",{key:2},()=>[f.value.length>0?(a(),x(R(D),{key:0,class:"tr-question__group",items:f.value,selected:k.value,"onUpdate:selected":d[0]||(d[0]=T=>k.value=T),"lines-limit":2,"show-more-trigger":t.groupShowMoreTrigger,onItemClick:pe},null,8,["items","selected","show-more-trigger"])):N("",!0),h("ul",{class:E(["tr-question__list",{scrolling:O.value}]),ref_key:"listRef",ref:Z},[(a(!0),c(K,null,te(v.value,(T,P)=>(a(),c("li",{class:"tr-question__list-item",key:T.id,ref_for:!0,ref:U=>s(U,P),onClick:U=>de(T),onMouseenter:U=>n.value[P]&&ve(T,P),onMouseleave:U=>n.value[P]&&fe(U)},[B(e.$slots,"item",{item:T},()=>[h("span",null,F(P+1)+". ",1),_e(F(T.text),1)],!0)],40,at))),128))],2)],!0),A(lt,{ref_key:"tooltipRef",ref:M,show:C.value,"onUpdate:show":d[1]||(d[1]=T=>C.value=T),content:z.value,trigger:b.value,disabled:O.value,placement:"top","delay-open":300,"delay-close":300},null,8,["show","content","trigger","disabled"]),A(R(Be),{class:"tr-question-popover__close",icon:R(we),size:"32","svg-size":"20",onClick:ce},null,8,["icon"])]),_:3},8,["show","class","style","append-to","offset","transition-props","trigger-events"]))}}),Y=I(ot,[["__scopeId","data-v-8cc35579"]]);Y.name="TrSuggestionPopover";const st=function(r){r.component(Y.name,Y)};Y.install=st;export{Y as x};
