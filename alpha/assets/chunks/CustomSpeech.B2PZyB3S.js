import{E as He,x as Je}from"./theme.FCGLGkiy.js";import{d as Ke,p as be,c as xe,o as Ce,e as Ie,j as oe,t as Te,G as qe,k as Qe,F as Xe,B as Ye,a as Fe}from"./framework.CSeOnaMy.js";var $e={exports:{}};(function(se){(function($){var M=typeof window=="object"&&!!window.document,j=M?window:Object;$(j,M),se.exports&&(se.exports=j.Recorder)})(function($,M){var j=function(){},H=function(r){return typeof r=="number"},q=function(r){return JSON.stringify(r)},s=function(r){return new Pe(r)},Q=s.LM="2025-01-11 09:28",te="https://github.com/xiangyuecn/Recorder",F="Recorder",X="getUserMedia",fe="srcSampleRate",w="sampleRate",K="bitRate",ne="catch",Y=$[F];if(Y&&Y.LM==Q){Y.CLog(Y.i18n.$T("K8zP::é‡å¤å¯¼å…¥{1}",0,F),3);return}s.IsOpen=function(){var r=s.Stream;if(r){var t=ke(r),e=t[0];if(e){var n=e.readyState;return n=="live"||n==e.LIVE}}return!1},s.BufferSize=4096,s.Destroy=function(){I(F+" Destroy"),we();for(var r in ae)ae[r]()};var ae={};s.BindDestroy=function(r,t){ae[r]=t},s.Support=function(){if(!M)return!1;var r=navigator.mediaDevices||{};return r[X]||(r=navigator,r[X]||(r[X]=r.webkitGetUserMedia||r.mozGetUserMedia||r.msGetUserMedia)),!(!r[X]||(s.Scope=r,!s.GetContext()))},s.GetContext=function(r){if(!M)return null;var t=window.AudioContext;if(t||(t=window.webkitAudioContext),!t)return null;var e=s.Ctx,n=0;return e||(e=s.Ctx=new t,n=1,s.NewCtxs=s.NewCtxs||[],s.BindDestroy("Ctx",function(){var a=s.Ctx;a&&a.close&&(ie(a),s.Ctx=0);var o=s.NewCtxs;s.NewCtxs=[];for(var i=0;i<o.length;i++)ie(o[i])})),r&&e.close&&(n||(e._useC||ie(e),e=new t),e._useC=1,s.NewCtxs.push(e)),e},s.CloseNewCtx=function(r){if(r&&r.close){ie(r);for(var t=s.NewCtxs||[],e=t.length,n=0;n<t.length;n++)if(t[n]==r){t.splice(n,1);break}I(f("mSxV::å‰©{1}ä¸ªGetContextæœªclose",0,e+"-1="+t.length),t.length?3:0)}};var ie=function(r){if(r&&r.close&&!r._isC&&(r._isC=1,r.state!="closed"))try{r.close()}catch(t){I("ctx close err",1,t)}},le=s.ResumeCtx=function(r,t,e,n){var a=0,o=0,i=0,g=0,u="EventListener",l="ResumeCtx ",S=function(C,v){o&&O(),a||(a=1,C&&n(C,g),v&&e(g)),v&&(!r._LsSC&&r["add"+u]&&r["add"+u]("statechange",p),r._LsSC=1,i=1)},O=function(C){if(!(C&&o)){o=C?1:0;for(var v=["focus","mousedown","mouseup","touchstart","touchend"],k=0;k<v.length;k++)window[(C?"add":"remove")+u](v[k],p,!0)}},p=function(){var C=r.state,v=Me(C);if(!a&&!t(v?++g:g))return S();v?(i&&I(l+"sc "+C,3),O(1),r.resume().then(function(){i&&I(l+"sc "+r.state),S(0,1)})[ne](function(k){I(l+"error",1,k),Me(r.state)||S(k.message||"error")})):C=="closed"?(i&&!r._isC&&I(l+"sc "+C,1),S("ctx closed")):S(0,1)};p()},Me=s.CtxSpEnd=function(r){return r=="suspended"||r=="interrupted"},Ae=function(r){var t=r.state,e="ctx.state="+t;return Me(t)&&(e+=f("nMIy::ï¼ˆæ³¨æ„ï¼šctxä¸æ˜¯runningçŠ¶æ€ï¼Œrec.openå’Œstartè‡³å°‘è¦æœ‰ä¸€ä¸ªåœ¨ç”¨æˆ·æ“ä½œ(è§¦æ‘¸ã€ç‚¹å‡»ç­‰)æ—¶è¿›è¡Œè°ƒç”¨ï¼Œå¦åˆ™å°†åœ¨rec.startæ—¶å°è¯•è¿›è¡Œctx.resumeï¼Œå¯èƒ½ä¼šäº§ç”Ÿå…¼å®¹æ€§é—®é¢˜(ä»…iOS)ï¼Œè¯·å‚é˜…æ–‡æ¡£ä¸­runningContexté…ç½®ï¼‰")),e},Le="ConnectEnableWebM";s[Le]=!0;var _e="ConnectEnableWorklet";s[_e]=!1;var Ee=function(r){var t=r.BufferSize||s.BufferSize,e=r.Stream,n=e._c,a=n[w],o={},i=ke(e),g=i[0],u=null,l="";if(g&&g.getSettings){u=g.getSettings();var S=u[w];S&&S!=a&&(l=f("eS8i::Streamçš„é‡‡æ ·ç‡{1}ä¸ç­‰äº{2}ï¼Œå°†è¿›è¡Œé‡‡æ ·ç‡è½¬æ¢ï¼ˆæ³¨æ„ï¼šéŸ³è´¨ä¸ä¼šå˜å¥½ç”šè‡³å¯èƒ½å˜å·®ï¼‰ï¼Œä¸»è¦åœ¨ç§»åŠ¨ç«¯æœªç¦ç”¨å›å£°æ¶ˆé™¤æ—¶ä¼šäº§ç”Ÿæ­¤ç°è±¡ï¼Œæµè§ˆå™¨æœ‰å›å£°æ¶ˆé™¤æ—¶å¯èƒ½åªä¼šè¿”å›16ké‡‡æ ·ç‡çš„éŸ³é¢‘æ•°æ®ï¼Œ",0,S,a))}e._ts=u,I(l+"Stream TrackSet: "+q(u),l?3:0);var O=function(b){var L=e._m=n.createMediaStreamSource(e),E=n.destination,U="createMediaStreamDestination";n[U]&&(E=e._d=n[U]()),L.connect(b),b.connect(E)},p,C,v,k="",A=e._call,m=function(b,L){for(var E in A){if(L!=a){o.index=0,o=s.SampleData([b],L,a,o,{_sum:1});var U=o.data,P=o._sum}else{o={};for(var z=b.length,U=new Int16Array(z),P=0,J=0;J<z;J++){var W=Math.max(-1,Math.min(1,b[J]));W=W<0?W*32768:W*32767,U[J]=W,P+=Math.abs(W)}}for(var G in A)A[G](U,P);return}},d="ScriptProcessor",_="audioWorklet",y=F+" "+_,D="RecProc",T="MediaRecorder",V=T+".WebM.PCM",h=n.createScriptProcessor||n.createJavaScriptNode,x=f("ZGlf::ã€‚ç”±äº{1}å†…éƒ¨1ç§’375æ¬¡å›è°ƒï¼Œåœ¨ç§»åŠ¨ç«¯å¯èƒ½ä¼šæœ‰æ€§èƒ½é—®é¢˜å¯¼è‡´å›è°ƒä¸¢å¤±å½•éŸ³å˜çŸ­ï¼ŒPCç«¯æ— å½±å“ï¼Œæš‚ä¸å»ºè®®å¼€å¯{1}ã€‚",0,_),c=function(){C=e.isWorklet=!1,De(e),I(f("7TU0::Connecté‡‡ç”¨è€çš„{1}ï¼Œ",0,d)+ee.get(s[_e]?f("JwCL::ä½†å·²è®¾ç½®{1}å°è¯•å¯ç”¨{2}",2):f("VGjB::å¯è®¾ç½®{1}å°è¯•å¯ç”¨{2}",2),[F+"."+_e+"=true",_])+k+x,3);var b=e._p=h.call(n,t,1,1);O(b),b.onaudioprocess=function(L){var E=L.inputBuffer.getChannelData(0);m(E,a)}},B=function(){p=e.isWebM=!1,Ne(e),C=e.isWorklet=!h||s[_e];var b=window.AudioWorkletNode;if(!(C&&n[_]&&b)){c();return}var L=function(){var J=function(G){return G.toString().replace(/^function|DEL_/g,"").replace(/\$RA/g,y)},W="class "+D+" extends AudioWorkletProcessor{";return W+="constructor "+J(function(G){DEL_super(G);var re=this,N=G.processorOptions.bufferSize;re.bufferSize=N,re.buffer=new Float32Array(N*2),re.pos=0,re.port.onmessage=function(Z){Z.data.kill&&(re.kill=!0,$C.log("$RA kill call"))},$C.log("$RA .ctor call",G)}),W+="process "+J(function(G,re,N){var Z=this,pe=Z.bufferSize,ve=Z.buffer,de=Z.pos;if(G=(G[0]||[])[0]||[],G.length){ve.set(G,de),de+=G.length;var he=~~(de/pe)*pe;if(he){this.port.postMessage({val:ve.slice(0,he)});var ye=ve.subarray(he,de);ve=new Float32Array(pe*2),ve.set(ye),de=ye.length,Z.buffer=ve}Z.pos=de}return!Z.kill}),W+='}try{registerProcessor("'+D+'", '+D+')}catch(e){$C.error("'+y+' Reg Error",e)}',W=W.replace(/\$C\./g,"console."),"data:text/javascript;base64,"+btoa(unescape(encodeURIComponent(W)))},E=function(){return C&&e._na},U=e._na=function(){v!==""&&(clearTimeout(v),v=setTimeout(function(){v=0,E()&&(I(f("MxX1::{1}æœªè¿”å›ä»»ä½•éŸ³é¢‘ï¼Œæ¢å¤ä½¿ç”¨{2}",0,_,d),3),h&&c())},500))},P=function(){if(E()){var J=e._n=new b(n,D,{processorOptions:{bufferSize:t}});O(J),J.port.onmessage=function(W){v&&(clearTimeout(v),v=""),E()?m(W.data.val,a):C||I(f("XUap::{1}å¤šä½™å›è°ƒ",0,_),3)},I(f("yOta::Connecté‡‡ç”¨{1}ï¼Œè®¾ç½®{2}å¯æ¢å¤è€å¼{3}",0,_,F+"."+_e+"=false",d)+k+x,3)}},z=function(){if(E()){if(n[D]){P();return}var J=L();n[_].addModule(J).then(function(W){E()&&(n[D]=1,P(),v&&U())})[ne](function(W){I(_+".addModule Error",1,W),E()&&c()})}};le(n,function(){return E()},z,z)},R=function(){var b=window[T],L="ondataavailable",E="audio/webm; codecs=pcm";p=e.isWebM=s[Le];var U=b&&L in b.prototype&&b.isTypeSupported(E);if(k=U?"":f("VwPd::ï¼ˆæ­¤æµè§ˆå™¨ä¸æ”¯æŒ{1}ï¼‰",0,V),!p||!U){B();return}var P=function(){return p&&e._ra};e._ra=function(){v!==""&&(clearTimeout(v),v=setTimeout(function(){P()&&(I(f("vHnb::{1}æœªè¿”å›ä»»ä½•éŸ³é¢‘ï¼Œé™çº§ä½¿ç”¨{2}",0,T,_),3),B())},500))};var z=Object.assign({mimeType:E},s.ConnectWebMOptions),J=e._r=new b(e,z),W=e._rd={};J[L]=function(G){var re=new FileReader;re.onloadend=function(){if(P()){var N=je(new Uint8Array(re.result),W);if(!N)return;if(N==-1){B();return}v&&(clearTimeout(v),v=""),m(N,W.webmSR)}else p||I(f("O9P7::{1}å¤šä½™å›è°ƒ",0,T),3)},re.readAsArrayBuffer(G.data)};try{J.start(~~(t/48)),I(f("LMEm::Connecté‡‡ç”¨{1}ï¼Œè®¾ç½®{2}å¯æ¢å¤ä½¿ç”¨{3}æˆ–è€å¼{4}",0,V,F+"."+Le+"=false",_,d))}catch(G){I("mr start err",1,G),B()}};R()},ze=function(r){r._na&&r._na(),r._ra&&r._ra()},De=function(r){r._na=null,r._n&&(r._n.port.postMessage({kill:!0}),r._n.disconnect(),r._n=null)},Ne=function(r){if(r._ra=null,r._r){try{r._r.stop()}catch(t){I("mr stop err",1,t)}r._r=null}},we=function(r){r=r||s;var t=r==s,e=r.Stream;e&&(e._m&&(e._m.disconnect(),e._m=null),!e._RC&&e._c&&s.CloseNewCtx(e._c),e._RC=null,e._c=null,e._d&&(Oe(e._d.stream),e._d=null),e._p&&(e._p.disconnect(),e._p.onaudioprocess=e._p=null),De(e),Ne(e),t&&Oe(e)),r.Stream=0},Oe=s.StopS_=function(r){for(var t=ke(r),e=0;e<t.length;e++){var n=t[e];n.stop&&n.stop()}r.stop&&r.stop()},ke=function(r){var t=0,e=0,n=[];r.getAudioTracks&&(t=r.getAudioTracks(),e=r.getVideoTracks()),t||(t=r.audioTracks,e=r.videoTracks);for(var a=0,o=t?t.length:0;a<o;a++)n.push(t[a]);for(var a=0,o=e?e.length:0;a<o;a++)n.push(e[a]);return n};s.SampleData=function(r,t,e,n,a){var o="SampleData";n||(n={});var i=n.index||0,g=n.offset||0,u=n.raisePrev||0,l=n.filter;if(l&&l.fn&&(l.sr&&l.sr!=t||l.srn&&l.srn!=e)&&(l=null,I(f("d48C::{1}çš„filteré‡‡æ ·ç‡å˜äº†ï¼Œé‡è®¾æ»¤æ³¢",0,o),3)),!l)if(e<=t){var S=e>t*3/4?0:e/2*3/4;l={fn:S?s.IIRFilter(!0,t,S):0}}else{var S=t>e*3/4?0:t/2*3/4;l={fn:S?s.IIRFilter(!0,e,S):0}}l.sr=t,l.srn=e;var O=l.fn,p=n.frameNext||[];a||(a={});var C=a.frameSize||1;a.frameType&&(C=a.frameType=="mp3"?1152:1);var v=a._sum,k=0,A=r.length;i>A+1&&I(f("tlbC::{1}ä¼¼ä¹ä¼ å…¥äº†æœªé‡ç½®chunk {2}",0,o,i+">"+A),3);for(var m=0,d=i;d<A;d++)m+=r[d].length;var _=t/e;if(_>1)m=Math.max(0,m-Math.floor(g)),m=Math.floor(m/_);else if(_<1){var y=1/_;m=Math.floor(m*y)}m+=p.length;for(var D=new Int16Array(m),T=0,d=0;d<p.length;d++)D[T]=p[d],T++;for(;i<A;i++){var V=r[i],h=V instanceof Float32Array,d=g,x=V.length,c=O&&O.Embed,B=0,R=0,b=0,L=0;if(_<1){for(var E=T+d,U=u,P=0;P<x;P++){var z=V[P];h&&(z=Math.max(-1,Math.min(1,z)),z=z<0?z*32768:z*32767);var J=Math.floor(E);E+=y;for(var W=Math.floor(E),G=(z-U)/(W-J),re=1;J<W;J++,re++){var N=Math.floor(U+re*G);c?(b=N,L=c.b0*b+c.b1*c.x1+c.b0*c.x2-c.a1*c.y1-c.a2*c.y2,c.x2=c.x1,c.x1=b,c.y2=c.y1,c.y1=L,N=L):N=O?O(N):N,N>32767?N=32767:N<-32768&&(N=-32768),v&&(k+=Math.abs(N)),D[J]=N,T++}U=u=z,d+=y}g=d%1;continue}for(var P=0,Z=0;P<x;P++,Z++){if(Z<x){var z=V[Z];h&&(z=Math.max(-1,Math.min(1,z)),z=z<0?z*32768:z*32767),c?(b=z,L=c.b0*b+c.b1*c.x1+c.b0*c.x2-c.a1*c.y1-c.a2*c.y2,c.x2=c.x1,c.x1=b,c.y2=c.y1,c.y1=L):L=O?O(z):z}if(B=R,R=L,Z==0){P--;continue}var pe=Math.floor(d);if(P==pe){var ve=Math.ceil(d),de=d-pe,he=B,ye=ve<x?R:he,me=he+(ye-he)*de;me>32767?me=32767:me<-32768&&(me=-32768),v&&(k+=Math.abs(me)),D[T]=me,T++,d+=_}}g=Math.max(0,d-x)}_<1&&T+1==m&&(m--,D=new Int16Array(D.buffer.slice(0,m*2))),T-1!=m&&T!=m&&I(o+" idx:"+T+" != size:"+m,3),p=null;var Be=m%C;if(Be>0){var Ue=(m-Be)*2;p=new Int16Array(D.buffer.slice(Ue)),D=new Int16Array(D.buffer.slice(0,Ue))}var Ge={index:i,offset:g,raisePrev:u,filter:l,frameNext:p,sampleRate:e,data:D};return v&&(Ge._sum=k),Ge},s.IIRFilter=function(r,t,e){var n=2*Math.PI*e/t,a=Math.sin(n),o=Math.cos(n),i=a/2,g=1+i,u=-2*o/g,l=(1-i)/g;if(r)var S=(1-o)/2/g,O=(1-o)/g;else var S=(1+o)/2/g,O=-(1+o)/g;var p=0,C=0,v=0,k=0,A=0,m=function(d){return v=S*d+O*p+S*C-u*k-l*A,C=p,p=d,A=k,k=v,v};return m.Embed={x1:0,x2:0,y1:0,y2:0,b0:S,b1:O,a1:u,a2:l},m},s.PowerLevel=function(r,t){var e=r/t||0,n;return e<1251?n=Math.round(e/1250*10):n=Math.round(Math.min(100,Math.max(0,(1+Math.log(e/1e4)/Math.log(10))*100))),n},s.PowerDBFS=function(r){var t=Math.max(.1,r||0),e=32767;return t=Math.min(t,e),t=20*Math.log(t/e)/Math.log(10),Math.max(-100,Math.round(t))},s.CLog=function(r,t){if(typeof console=="object"){var e=new Date,n=("0"+e.getMinutes()).substr(-2)+":"+("0"+e.getSeconds()).substr(-2)+"."+("00"+e.getMilliseconds()).substr(-3),a=this&&this.envIn&&this.envCheck&&this.id,o=["["+n+" "+F+(a?":"+a:"")+"]"+r],i=arguments,g=s.CLog,u=2,l=g.log||console.log;for(H(t)?l=t==1?g.error||console.error:t==3?g.warn||console.warn:l:u=1;u<i.length;u++)o.push(i[u]);Re?l&&l("[IsLoser]"+o[0],o.length>1?o:""):l.apply(console,o)}};var I=function(){s.CLog.apply(this,arguments)},Re=!0;try{Re=!console.log.apply}catch{}var Ve=0;function Pe(r){var t=this;t.id=++Ve,We();var e={type:"mp3",onProcess:j};for(var n in r)e[n]=r[n];t.set=e;var a=e[K],o=e[w];(a&&!H(a)||o&&!H(o))&&t.CLog(f.G("IllegalArgs-1",[f("VtS4::{1}å’Œ{2}å¿…é¡»æ˜¯æ•°å€¼",0,w,K)]),1,r),e[K]=+a||16,e[w]=+o||16e3,t.state=0,t._S=9,t.Sync={O:9,C:9}}s.Sync={O:9,C:9},s.prototype=Pe.prototype={CLog:I,_streamStore:function(){return this.set.sourceStream?this:s},_streamGet:function(){return this._streamStore().Stream},_streamCtx:function(){var r=this._streamGet();return r&&r._c},open:function(r,t){var e=this,n=e.set,a=e._streamStore(),o=0;r=r||j;var i=function(h,x){x=!!x,e.CLog(f("5tWi::å½•éŸ³openå¤±è´¥ï¼š")+h+",isUserNotAllow:"+x,1),o&&s.CloseNewCtx(o),t&&t(h,x)};e._streamTag=X;var g=function(){e.CLog("open ok, id:"+e.id+" stream:"+e._streamTag),r(),e._SO=0},u=a.Sync,l=++u.O,S=u.C;e._O=e._O_=l,e._SO=e._S;var O=function(){if(S!=u.C||!e._O){var h=f("dFm8::openè¢«å–æ¶ˆ");return l==u.O?e.close():h=f("VtJO::openè¢«ä¸­æ–­"),i(h),!0}};if(!M){i(f.G("NonBrowser-1",["open"])+f("EMJq::ï¼Œå¯å°è¯•ä½¿ç”¨RecordAppè§£å†³æ–¹æ¡ˆ")+"("+te+"/tree/master/app-support-sample)");return}var p=e.envCheck({envName:"H5",canProcess:!0});if(p){i(f("A5bm::ä¸èƒ½å½•éŸ³ï¼š")+p);return}var C,v=function(){C=n.runningContext,C||(C=o=s.GetContext(!0))};if(n.sourceStream){if(e._streamTag="set.sourceStream",!s.GetContext()){i(f("1iU7::ä¸æ”¯æŒæ­¤æµè§ˆå™¨ä»æµä¸­è·å–å½•éŸ³"));return}v(),we(a);var k=e.Stream=n.sourceStream;k._c=C,k._RC=n.runningContext,k._call={};try{Ee(a)}catch(h){we(a),i(f("BTW2::ä»æµä¸­æ‰“å¼€å½•éŸ³å¤±è´¥ï¼š")+h.message);return}g();return}var A=function(h,x){try{window.top.a}catch{i(f("Nclz::æ— æƒå½•éŸ³(è·¨åŸŸï¼Œè¯·å°è¯•ç»™iframeæ·»åŠ éº¦å…‹é£è®¿é—®ç­–ç•¥ï¼Œå¦‚{1})",0,'allow="camera;microphone"'));return}m(1,h)&&(/Found/i.test(h)?i(x+f("jBa9::ï¼Œæ— å¯ç”¨éº¦å…‹é£")):i(x))},m=function(h,x){if(/Permission|Allow/i.test(x))h&&i(f("gyO5::ç”¨æˆ·æ‹’ç»äº†å½•éŸ³æƒé™"),!0);else if(window.isSecureContext===!1)h&&i(f("oWNo::æµè§ˆå™¨ç¦æ­¢ä¸å®‰å…¨é¡µé¢å½•éŸ³ï¼Œå¯å¼€å¯httpsè§£å†³"));else return 1};if(s.IsOpen()){g();return}if(!s.Support()){A("",f("COxc::æ­¤æµè§ˆå™¨ä¸æ”¯æŒå½•éŸ³"));return}v();var d=function(h){setTimeout(function(){h._call={};var x=s.Stream;x&&(we(),h._call=x._call),s.Stream=h,h._c=C,h._RC=n.runningContext,!O()&&(s.IsOpen()?(x&&e.CLog(f("upb8::å‘ç°åŒæ—¶å¤šæ¬¡è°ƒç”¨open"),1),Ee(a),g()):i(f("Q1GA::å½•éŸ³åŠŸèƒ½æ— æ•ˆï¼šæ— éŸ³é¢‘æµ")))},100)},_=function(h){var x=h.name||h.message||h.code+":"+h,c="";y==1&&m(0,x)&&(c=f("KxE2::ï¼Œå°†å°è¯•ç¦ç”¨å›å£°æ¶ˆé™¤åé‡è¯•"));var B=f("xEQR::è¯·æ±‚å½•éŸ³æƒé™é”™è¯¯"),R=f("bDOG::æ— æ³•å½•éŸ³ï¼š");e.CLog(B+c+"|"+h,c||T?3:1,h),c?(D=x,T=h,V(1)):T?(e.CLog(B+"|"+T,1,T),A(D,R+T)):A(x,R+h)},y=0,D,T,V=function(h){y++;var x="audioTrackSet",c="autoGainControl",B="echoCancellation",R="noiseSuppression",b=x+":{"+B+","+R+","+c+"}",L=JSON.parse(q(n[x]||!0));e.CLog("open... "+y+" "+x+":"+q(L)),h&&(typeof L!="object"&&(L={}),L[c]=!1,L[B]=!1,L[R]=!1),L[w]&&e.CLog(f("IjL3::æ³¨æ„ï¼šå·²é…ç½®{1}å‚æ•°ï¼Œå¯èƒ½ä¼šå‡ºç°æµè§ˆå™¨ä¸èƒ½æ­£ç¡®é€‰ç”¨éº¦å…‹é£ã€ç§»åŠ¨ç«¯æ— æ³•å¯ç”¨å›å£°æ¶ˆé™¤ç­‰ç°è±¡",0,x+"."+w),3);var E={audio:L,video:n.videoTrackSet||!1};try{var U=s.Scope[X](E,d,_)}catch(P){e.CLog(X,3,P),E={audio:!0,video:!1},U=s.Scope[X](E,d,_)}e.CLog(X+"("+q(E)+") "+Ae(C)+f("RiWe::ï¼Œæœªé…ç½® {1} æ—¶æµè§ˆå™¨å¯èƒ½ä¼šè‡ªåŠ¨å¯ç”¨å›å£°æ¶ˆé™¤ï¼Œç§»åŠ¨ç«¯æœªç¦ç”¨å›å£°æ¶ˆé™¤æ—¶å¯èƒ½ä¼šé™ä½ç³»ç»Ÿæ’­æ”¾éŸ³é‡ï¼ˆå…³é—­å½•éŸ³åå¯æ¢å¤ï¼‰å’Œä»…æä¾›16ké‡‡æ ·ç‡çš„éŸ³é¢‘æµï¼ˆä¸éœ€è¦å›å£°æ¶ˆé™¤æ—¶å¯æ˜ç¡®é…ç½®æˆç¦ç”¨æ¥è·å¾—48ké«˜éŸ³è´¨çš„æµï¼‰ï¼Œè¯·å‚é˜…æ–‡æ¡£ä¸­{2}é…ç½®",0,b,x)+"("+te+") LM:"+Q+" UA:"+navigator.userAgent),U&&U.then&&U.then(d)[ne](_)};V()},close:function(r){r=r||j;var t=this,e=t._streamStore();t._stop();var n=" stream:"+t._streamTag,a=e.Sync;if(t._O=0,t._O_!=a.O){t.CLog(f("hWVz::closeè¢«å¿½ç•¥ï¼ˆå› ä¸ºåŒæ—¶openäº†å¤šä¸ªrecï¼Œåªæœ‰æœ€åä¸€ä¸ªä¼šçœŸæ­£closeï¼‰")+n,3),r();return}a.C++,we(e),t.CLog("close,"+n),r()},mock:function(r,t){var e=this;return e._stop(),e.isMock=1,e.mockEnvInfo=null,e.buffers=[r],e.recSize=r.length,e._setSrcSR(t),e._streamTag="mock",e},_setSrcSR:function(r){var t=this,e=t.set,n=e[w];n>r?e[w]=r:n=0,t[fe]=r,t.CLog(fe+": "+r+" set."+w+": "+e[w]+(n?" "+f("UHvm::å¿½ç•¥")+": "+n:""),n?3:0)},envCheck:function(r){var t,e=this,n=e.set,a="CPU_BE";if(!t&&!s[a]&&typeof Int8Array=="function"&&!new Int8Array(new Int32Array([1]).buffer)[0]&&(We(a),t=f("Essp::ä¸æ”¯æŒ{1}æ¶æ„",0,a)),!t){var o=n.type,i=e[o+"_envCheck"];n.takeoffEncodeChunk&&(i?r.canProcess||(t=f("7uMV::{1}ç¯å¢ƒä¸æ”¯æŒå®æ—¶å¤„ç†",0,r.envName)):t=f("2XBl::{1}ç±»å‹ä¸æ”¯æŒè®¾ç½®takeoffEncodeChunk",0,o)+(e[o]?"":f("LG7e::(æœªåŠ è½½ç¼–ç å™¨)"))),!t&&i&&(t=e[o+"_envCheck"](r,n))}return t||""},envStart:function(r,t){var e=this,n=e.set;if(e.isMock=r?1:0,e.mockEnvInfo=r,e.buffers=[],e.recSize=0,r&&(e._streamTag="env$"+r.envName),e.state=1,e.envInLast=0,e.envInFirst=0,e.envInFix=0,e.envInFixTs=[],e._setSrcSR(t),e.engineCtx=0,e[n.type+"_start"]){var a=e.engineCtx=e[n.type+"_start"](n);a&&(a.pcmDatas=[],a.pcmSize=0)}},envResume:function(){this.envInFixTs=[]},envIn:function(r,t){var e=this,n=e.set,a=e.engineCtx;if(e.state!=1){e.state||e.CLog("envIn at state=0",3);return}var o=e[fe],i=r.length,g=s.PowerLevel(t,i),u=e.buffers,l=u.length;u.push(r);var S=u,O=l,p=Date.now(),C=Math.round(i/o*1e3);e.envInLast=p,e.buffers.length==1&&(e.envInFirst=p-C);var v=e.envInFixTs;v.splice(0,0,{t:p,d:C});for(var k=p,A=0,m=0;m<v.length;m++){var d=v[m];if(p-d.t>3e3){v.length=m;break}k=d.t,A+=d.d}var _=v[1],y=p-k,D=y-A;if(D>y/3&&(_&&y>1e3||v.length>=6)){var T=p-_.t-C;if(T>C/5){var V=!n.disableEnvInFix;if(e.CLog("["+p+"]"+ee.get(f(V?"4Kfd::è¡¥å¿{1}ms":"bM5i::æœªè¡¥å¿{1}ms",1),[T]),3),e.envInFix+=T,V){var h=new Int16Array(T*o/1e3);i+=h.length,u.push(h)}}}var x=e.recSize,c=i,B=x+c;if(e.recSize=B,a){var R=s.SampleData(u,o,n[w],a.chunkInfo);a.chunkInfo=R,x=a.pcmSize,c=R.data.length,B=x+c,a.pcmSize=B,u=a.pcmDatas,l=u.length,u.push(R.data),o=R[w]}var b=Math.round(B/o*1e3),L=u.length,E=S.length,U=function(){for(var G=P?0:-c,re=u[0]==null,N=l;N<L;N++){var Z=u[N];Z==null?re=1:(G+=Z.length,a&&Z.length&&e[n.type+"_encode"](a,Z))}if(re&&a){var N=O;for(S[0]&&(N=0);N<E;N++)S[N]=null}re&&(G=P?c:0,u[0]=null),a?a.pcmSize+=G:e.recSize+=G},P=0,z="rec.set.onProcess";try{P=n.onProcess(u,g,b,o,l,U),P=P===!0}catch(G){console.error(z+f("gFUF::å›è°ƒå‡ºé”™æ˜¯ä¸å…è®¸çš„ï¼Œéœ€ä¿è¯ä¸ä¼šæŠ›å¼‚å¸¸"),G)}var J=Date.now()-p;if(J>10&&e.envInFirst-p>1e3&&e.CLog(z+f("2ghS::ä½æ€§èƒ½ï¼Œè€—æ—¶{1}ms",0,J),3),P){for(var W=0,m=l;m<L;m++)u[m]==null?W=1:u[m]=new Int16Array(0);W?e.CLog(f("ufqH::æœªè¿›å…¥å¼‚æ­¥å‰ä¸èƒ½æ¸…é™¤buffers"),3):a?a.pcmSize-=c:e.recSize-=c}else U()},start:function(){var r=this,t=1;if(r.set.sourceStream?r.Stream||(t=0):s.IsOpen()||(t=0),!t){r.CLog(f("6WmN::startå¤±è´¥ï¼šæœªopen"),1);return}var e=r._streamCtx();if(r.CLog(f("kLDN::start å¼€å§‹å½•éŸ³ï¼Œ")+Ae(e)+" stream:"+r._streamTag),r._stop(),r.envStart(null,e[w]),r.state=3,r._SO&&r._SO+1!=r._S){r.CLog(f("Bp2y::startè¢«ä¸­æ–­"),3);return}r._SO=0;var n=function(){r.state==3&&(r.state=1,r.resume())},a="AudioContext resume: ",o=r._streamGet();o._call[r.id]=function(){r.CLog(a+e.state+"|stream ok"),n()},le(e,function(i){return i&&r.CLog(a+"wait..."),r.state==3},function(i){i&&r.CLog(a+e.state),n()},function(i){r.CLog(a+e.state+f("upkE::ï¼Œå¯èƒ½æ— æ³•å½•éŸ³ï¼š")+i,1),n()})},pause:function(){var r=this,t=r._streamGet();r.state&&(r.state=2,r.CLog("pause"),t&&delete t._call[r.id])},resume:function(){var r=this,t=r._streamGet(),e="resume",n=e+"(wait ctx)";if(r.state==3)r.CLog(n);else if(r.state){r.state=1,r.CLog(e),r.envResume(),t&&(t._call[r.id]=function(o,i){r.state==1&&r.envIn(o,i)},ze(t));var a=r._streamCtx();a&&le(a,function(o){return o&&r.CLog(n+"..."),r.state==1},function(o){o&&r.CLog(n+a.state),ze(t)},function(o){r.CLog(n+a.state+"[err]"+o,1)})}},_stop:function(r){var t=this,e=t.set;t.isMock||t._S++,t.state&&(t.pause(),t.state=0),!r&&t[e.type+"_stop"]&&(t[e.type+"_stop"](t.engineCtx),t.engineCtx=0)},stop:function(r,t,e){var n=this,a=n.set,o,i=n.envInLast-n.envInFirst,g=i&&n.buffers.length;n.CLog(f("Xq4s::stop å’Œstartæ—¶å·®:")+(i?i+"ms "+f("3CQP::è¡¥å¿:")+n.envInFix+"ms envIn:"+g+" fps:"+(g/i*1e3).toFixed(1):"-")+" stream:"+n._streamTag+" ("+te+") LM:"+Q);var u=function(){n._stop(),e&&n.close()},l=function(d){n.CLog(f("u8JG::ç»“æŸå½•éŸ³å¤±è´¥ï¼š")+d,1),t&&t(d),u()},S=function(d,_,y){var D="blob",T="arraybuffer",V="dataType",h="DefaultDataType",x=n[V]||s[h]||D,c=V+"="+x,B=d instanceof ArrayBuffer,R=0,b=B?d.byteLength:d.size;if(x==T?B||(R=1):x==D?typeof Blob!="function"?R=f.G("NonBrowser-1",[c])+f("1skY::ï¼Œè¯·è®¾ç½®{1}",0,F+"."+h+'="'+T+'"'):(B&&(d=new Blob([d],{type:_})),d instanceof Blob||(R=1),_=d.type||_):R=f.G("NotSupport-1",[c]),n.CLog(f("Wv7l::ç»“æŸå½•éŸ³ ç¼–ç èŠ±{1}ms éŸ³é¢‘æ—¶é•¿{2}ms æ–‡ä»¶å¤§å°{3}b",0,Date.now()-o,y,b)+" "+c+","+_),R){l(R!=1?R:f("Vkbd::{1}ç¼–ç å™¨è¿”å›çš„ä¸æ˜¯{2}",0,a.type,x)+", "+c);return}if(a.takeoffEncodeChunk)n.CLog(f("QWnr::å¯ç”¨takeoffEncodeChunkåstopè¿”å›çš„blobé•¿åº¦ä¸º0ä¸æä¾›éŸ³é¢‘æ•°æ®"),3);else if(b<Math.max(50,y/5)){l(f("Sz2H::ç”Ÿæˆçš„{1}æ— æ•ˆ",0,a.type));return}r&&r(d,y,_),u()};if(!n.isMock){var O=n.state==3;if(!n.state||O){l(f("wf9t::æœªå¼€å§‹å½•éŸ³")+(O?f("Dl2c::ï¼Œå¼€å§‹å½•éŸ³å‰æ— ç”¨æˆ·äº¤äº’å¯¼è‡´AudioContextæœªè¿è¡Œ"):""));return}}n._stop(!0);var p=n.recSize;if(!p){l(f("Ltz3::æœªé‡‡é›†åˆ°å½•éŸ³"));return}if(!n[a.type]){l(f("xGuI::æœªåŠ è½½{1}ç¼–ç å™¨ï¼Œè¯·å°è¯•åˆ°{2}çš„src/engineå†…æ‰¾åˆ°{1}çš„ç¼–ç å™¨å¹¶åŠ è½½",0,a.type,F));return}if(n.isMock){var C=n.envCheck(n.mockEnvInfo||{envName:"mock",canProcess:!1});if(C){l(f("AxOH::å½•éŸ³é”™è¯¯ï¼š")+C);return}}var v=n.engineCtx;if(n[a.type+"_complete"]&&v){var m=Math.round(v.pcmSize/a[w]*1e3);o=Date.now(),n[a.type+"_complete"](v,function(_,y){S(_,y,m)},l);return}if(o=Date.now(),!n.buffers[0]){l(f("xkKd::éŸ³é¢‘buffersè¢«é‡Šæ”¾"));return}var k=s.SampleData(n.buffers,n[fe],a[w]);a[w]=k[w];var A=k.data,m=Math.round(A.length/a[w]*1e3);n.CLog(f("CxeT::é‡‡æ ·:{1} èŠ±:{2}ms",0,p+"->"+A.length,Date.now()-o)),setTimeout(function(){o=Date.now(),n[a.type](A,function(d,_){S(d,_,m)},function(d){l(d)})})}};var je=function(r,t){t.pos||(t.pos=[0],t.tracks={},t.bytes=[]);var e=t.tracks,n=[t.pos[0]],a=function(){t.pos[0]=n[0]},o=t.bytes.length,i=new Uint8Array(o+r.length);if(i.set(t.bytes),i.set(r,o),t.bytes=i,!t._ht){if(ce(i,n),ge(i,n),!ue(ce(i,n),[24,83,128,103]))return;for(ce(i,n);n[0]<i.length;){var g=ce(i,n),u=ge(i,n),l=[0],S=0;if(!u)return;if(ue(g,[22,84,174,107])){for(;l[0]<u.length;){var O=ce(u,l),p=ge(u,l),C=[0],v={channels:0,sampleRate:0};if(ue(O,[174]))for(;C[0]<p.length;){var k=ce(p,C),A=ge(p,C),m=[0];if(ue(k,[215])){var d=Se(A);v.number=d,e[d]=v}else if(ue(k,[131])){var d=Se(A);d==1?v.type="video":d==2?(v.type="audio",S||(t.track0=v),v.idx=S++):v.type="Type-"+d}else if(ue(k,[134])){for(var _="",y=0;y<A.length;y++)_+=String.fromCharCode(A[y]);v.codec=_}else if(ue(k,[225]))for(;m[0]<A.length;){var D=ce(A,m),T=ge(A,m);if(ue(D,[181])){var d=0,V=new Uint8Array(T.reverse()).buffer;T.length==4?d=new Float32Array(V)[0]:T.length==8?d=new Float64Array(V)[0]:I("WebM Track !Float",1,T),v[w]=Math.round(d)}else ue(D,[98,100])?v.bitDepth=Se(T):ue(D,[159])&&(v.channels=Se(T))}}}t._ht=1,I("WebM Tracks",e),a();break}}}var h=t.track0;if(h){var x=h[w];if(t.webmSR=x,h.bitDepth==16&&/FLOAT/i.test(h.codec)&&(h.bitDepth=32,I("WebM 16->32 bit",3)),x<8e3||h.bitDepth!=32||h.channels<1||!/(\b|_)PCM\b/i.test(h.codec))return t.bytes=[],t.bad||I("WebM Track Unexpected",3,t),t.bad=1,-1;for(var c=[],B=0;n[0]<i.length;){var O=ce(i,n),p=ge(i,n);if(!p)break;if(ue(O,[163])){var R=p[0]&15,v=e[R];if(v){if(v.idx===0){for(var b=new Uint8Array(p.length-4),y=4;y<p.length;y++)b[y-4]=p[y];c.push(b),B+=b.length}}else return I("WebM !Track"+R,1,e),-1}a()}if(B){var L=new Uint8Array(i.length-t.pos[0]);L.set(i.subarray(t.pos[0])),t.bytes=L,t.pos[0]=0;for(var b=new Uint8Array(B),y=0,E=0;y<c.length;y++)b.set(c[y],E),E+=c[y].length;var V=new Float32Array(b.buffer);if(h.channels>1){for(var U=[],y=0;y<V.length;)U.push(V[y]),y+=h.channels;V=new Float32Array(U)}return V}}},ue=function(r,t){if(!r||r.length!=t.length)return!1;if(r.length==1)return r[0]==t[0];for(var e=0;e<r.length;e++)if(r[e]!=t[e])return!1;return!0},Se=function(r){for(var t="",e=0;e<r.length;e++){var n=r[e];t+=(n<16?"0":"")+n.toString(16)}return parseInt(t,16)||0},ce=function(r,t,e){var n=t[0];if(!(n>=r.length)){var a=r[n],o=("0000000"+a.toString(2)).substr(-8),i=/^(0*1)(\d*)$/.exec(o);if(i){var g=i[1].length,u=[];if(!(n+g>r.length)){for(var l=0;l<g;l++)u[l]=r[n],n++;return e&&(u[0]=parseInt(i[2]||"0",2)),t[0]=n,u}}}},ge=function(r,t){var e=ce(r,t,1);if(e){var n=Se(e),a=t[0],o=[];if(n<2147483647){if(a+n>r.length)return;for(var i=0;i<n;i++)o[i]=r[a],a++}return t[0]=a,o}},ee=s.i18n={lang:"zh-CN",alias:{"zh-CN":"zh","en-US":"en"},locales:{},data:{},put:function(r,t){var e=F+".i18n.put: ",n=r.overwrite;n=n==null||n;var a=r.lang;if(a=ee.alias[a]||a,!a)throw new Error(e+"set.lang?");var o=ee.locales[a];o||(o={},ee.locales[a]=o);for(var i=/^([\w\-]+):/,g,u=0;u<t.length;u++){var S=t[u];if(g=i.exec(S),!g){I(e+"'key:'? "+S,3,r);continue}var l=g[1],S=S.substr(l.length+1);!n&&o[l]||(o[l]=S)}},get:function(){return ee.v_G.apply(null,arguments)},v_G:function(r,t,e){t=t||[],e=e||ee.lang,e=ee.alias[e]||e;var n=ee.locales[e],a=n&&n[r]||"";return!a&&e!="zh"?e=="en"?ee.v_G(r,t,"zh"):ee.v_G(r,t,"en"):(ee.lastLang=e,a=="=Empty"?"":a.replace(/\{(\d+)(\!?)\}/g,function(o,i,g){return i=+i||0,o=t[i-1],(i<1||i>t.length)&&(o="{?}",I("i18n["+r+"] no {"+i+"}: "+a,3)),g?"":o}))},$T:function(){return ee.v_T.apply(null,arguments)},v_T:function(){for(var r=arguments,t="",e=[],n=0,a=F+".i18n.$T:",o=/^([\w\-]*):/,i,g=0;g<r.length;g++){var u=r[g];if(g==0){if(i=o.exec(u),t=i&&i[1],!t)throw new Error(a+"0 'key:'?");u=u.substr(t.length+1)}if(n===-1)e.push(u);else{if(n)throw new Error(a+" bad args");if(u===0)n=-1;else if(H(u)){if(u<1)throw new Error(a+" bad args");n=u}else{var l=g==1?"en":g?"":"zh";if(i=o.exec(u),i&&(l=i[1]||l,u=u.substr(i[1].length+1)),!i||!l)throw new Error(a+g+" 'lang:'?");ee.put({lang:l,overwrite:!1},[t+":"+u])}}}return t?n>0?t:ee.v_G(t,e):""}},f=ee.$T;f.G=ee.get,f("NonBrowser-1::éæµè§ˆå™¨ç¯å¢ƒï¼Œä¸æ”¯æŒ{1}",1),f("IllegalArgs-1::å‚æ•°é”™è¯¯ï¼š{1}",1),f("NeedImport-2::è°ƒç”¨{1}éœ€è¦å…ˆå¯¼å…¥{2}",2),f("NotSupport-1::ä¸æ”¯æŒï¼š{1}",1),s.TrafficImgUrl="//ia.51.la/go1?id=20469973&pvFlag=1";var We=s.Traffic=function(r){if(M){r=r?"/"+F+"/Report/"+r:"";var t=s.TrafficImgUrl;if(t){var e=s.Traffic,n=/^(https?:..[^\/#]*\/?)[^#]*/i.exec(location.href)||[],a=n[1]||"http://file/",o=(n[0]||a)+r;if(t.indexOf("//")==0&&(/^https:/i.test(o)?t="https:"+t:t="http:"+t),r&&(t=t+"&cu="+encodeURIComponent(a+r)),!e[o]){e[o]=1;var i=new Image;i.src=t,I("Traffic Analysis Image: "+(r||F+".TrafficImgUrl="+s.TrafficImgUrl))}}}};Y&&(I(f("8HO5::è¦†ç›–å¯¼å…¥{1}",0,F),1),Y.Destroy()),$[F]=s})})($e);var Ze=$e.exports;const er=He(Ze);(function(se){var $=typeof window=="object"&&!!window.document,M=$?window:Object,j=M.Recorder,H=j.i18n;se(j,H,H.$T,$)})(function(se,$,M,j){se.prototype.enc_wav={stable:!0,fast:!0,getTestMsg:function(){return M("gPSE::æ”¯æŒä½æ•°8ä½ã€16ä½ï¼ˆå¡«åœ¨æ¯”ç‰¹ç‡é‡Œé¢ï¼‰ï¼Œé‡‡æ ·ç‡å–å€¼æ— é™åˆ¶ï¼›æ­¤ç¼–ç å™¨ä»…åœ¨pcmæ•°æ®å‰åŠ äº†ä¸€ä¸ª44å­—èŠ‚çš„wavå¤´ï¼Œç¼–ç å‡ºæ¥çš„16ä½wavæ–‡ä»¶å»æ‰å¼€å¤´çš„44å­—èŠ‚å³å¯å¾—åˆ°pcmï¼ˆæ³¨ï¼šå…¶ä»–wavç¼–ç å™¨å¯èƒ½ä¸æ˜¯44å­—èŠ‚ï¼‰")}};var H=function(q){var s=q.bitRate,Q=s==8?8:16;s!=Q&&se.CLog(M("wyw9::WAV Info: ä¸æ”¯æŒ{1}ä½ï¼Œå·²æ›´æ–°æˆ{2}ä½",0,s,Q),3),q.bitRate=Q};se.prototype.wav=function(q,s,Q){var te=this,F=te.set;H(F);var X=q.length,fe=F.sampleRate,w=F.bitRate,K=X*(w/8),ne=se.wav_header(1,1,fe,w,K),Y=ne.length,ae=new Uint8Array(Y+K);if(ae.set(ne),w==8)for(var ie=0;ie<X;ie++){var le=(q[ie]>>8)+128;ae[Y++]=le}else ae=new Int16Array(ae.buffer),ae.set(q,Y/2);s(ae.buffer,"audio/wav")},se.wav_header=function(q,s,Q,te,F){var X=q==1?0:2,fe=new ArrayBuffer(44+X),w=new DataView(fe),K=0,ne=function(ie){for(var le=0;le<ie.length;le++,K++)w.setUint8(K,ie.charCodeAt(le))},Y=function(ie){w.setUint16(K,ie,!0),K+=2},ae=function(ie){w.setUint32(K,ie,!0),K+=4};return ne("RIFF"),ae(36+X+F),ne("WAVE"),ne("fmt "),ae(16+X),Y(q),Y(s),ae(Q),ae(Q*(s*te/8)),Y(s*te/8),Y(te),q!=1&&Y(0),ne("data"),ae(F),new Uint8Array(fe)}});const rr=er;class tr{closeRecorder(){this.recorder&&(this.recorder.close(),this.recorder=void 0)}async processWithAliyunAPI($){var M,j;if(this.callbacks)try{const H="https://agent.opentiny.design/api/asr/recognize",q=new FormData;q.append("audio",$);const s=await fetch(`${H}`,{method:"POST",body:q});if(!s.ok){const te=await s.text();throw new Error(`HTTP é”™è¯¯! çŠ¶æ€ç : ${s.status}, å“åº”: ${te}`)}const Q=await s.json();if(Q.success&&((M=Q.data)!=null&&M.result)){const te=Q.data.result;this.callbacks.onFinal(te),this.callbacks.onEnd(te)}else throw new Error(Q.message||((j=Q.data)==null?void 0:j.message)||"è¯†åˆ«å¤±è´¥")}catch(H){this.callbacks.onError(H instanceof Error?H:new Error("è¯­éŸ³è¯†åˆ«å¤±è´¥"))}}async start($){this.callbacks=$;try{this.recorder=rr({type:"wav",sampleRate:16e3,bitRate:16}),this.recorder.open(()=>{var M;(M=this.recorder)==null||M.start(),$.onStart()},(M,j)=>{const H=j?`ç”¨æˆ·æ‹’ç»äº†éº¦å…‹é£æƒé™: ${M}`:`æ— æ³•æ‰“å¼€éº¦å…‹é£: ${M}`;$.onError(new Error(H))})}catch(M){$.onError(M instanceof Error?M:new Error("é˜¿é‡Œäº‘è¯­éŸ³æœåŠ¡å¯åŠ¨å¤±è´¥"))}}async stop(){this.recorder&&this.recorder.stop(($,M)=>{console.log(`å½•éŸ³æˆåŠŸï¼Œæ ¼å¼: ${$.type}ï¼Œæ—¶é•¿: ${M}ms`,$),this.processWithAliyunAPI($),this.closeRecorder()},$=>{var M;(M=this.callbacks)==null||M.onError(new Error(`å½•éŸ³å¤±è´¥: ${$}`)),this.closeRecorder()})}isSupported(){return!0}}const nr={style:{display:"flex","flex-direction":"column",gap:"20px"}},ar={key:0,style:{padding:"12px",background:"#e8f4fd","border-radius":"6px","border-left":"4px solid #1890ff"}},ir={style:{"font-weight":"500",color:"#1890ff"}},or={key:0,style:{"margin-top":"8px",color:"#666","font-style":"italic"}},sr={key:1,style:{padding:"16px",background:"#f9f9f9","border-radius":"8px"}},fr={style:{"max-height":"200px","overflow-y":"auto"}},ur={style:{"font-size":"12px",color:"#999","margin-bottom":"4px"}},vr=Ke({__name:"CustomSpeech",setup(se){const $=be(""),M=be(""),j=be(""),H=be([]),q={customHandler:new tr,interimResults:!0},s=()=>{M.value="ğŸ¤ æ­£åœ¨å½•éŸ³...",j.value=""},Q=w=>{j.value=w},te=w=>{M.value="âœ… è¯†åˆ«å®Œæˆ",j.value="",H.value.unshift({text:w,timestamp:new Date().toLocaleTimeString()}),H.value.length>10&&(H.value=H.value.slice(0,10))},F=()=>{M.value="",j.value=""},X=w=>{M.value="",j.value="",console.error("è¯­éŸ³è¯†åˆ«é”™è¯¯:",w)},fe=w=>{console.log("æäº¤å†…å®¹:",w)};return(w,K)=>(Ce(),xe("div",nr,[M.value?(Ce(),xe("div",ar,[oe("div",ir,Te(M.value),1),j.value?(Ce(),xe("div",or," å®æ—¶è¯†åˆ«: "+Te(j.value),1)):Ie("",!0)])):Ie("",!0),oe("div",null,[K[1]||(K[1]=oe("h4",{style:{margin:"24px 0"}},"æ¨¡æ‹Ÿè¯­éŸ³è¯†åˆ«æ¼”ç¤º",-1)),qe(Qe(Je),{modelValue:$.value,"onUpdate:modelValue":K[0]||(K[0]=ne=>$.value=ne),mode:"single",allowSpeech:!0,speech:q,placeholder:"ç‚¹å‡»éº¦å…‹é£æŒ‰é’®å¼€å§‹è¯­éŸ³è¾“å…¥...",onSpeechStart:s,onSpeechInterim:Q,onSpeechFinal:te,onSpeechEnd:F,onSpeechError:X,onSubmit:fe},null,8,["modelValue"])]),H.value.length>0?(Ce(),xe("div",sr,[K[2]||(K[2]=oe("h4",{style:{margin:"0 0 12px 0"}},"è¯†åˆ«å†å²",-1)),oe("div",fr,[(Ce(!0),xe(Xe,null,Ye(H.value,(ne,Y)=>(Ce(),xe("div",{key:Y,style:{padding:"8px","margin-bottom":"8px",background:"white","border-radius":"4px","border-left":"3px solid #52c41a"}},[oe("div",ur,Te(ne.timestamp),1),oe("div",null,Te(ne.text),1)]))),128))])])):Ie("",!0),K[3]||(K[3]=oe("div",{style:{padding:"16px",background:"#fffbe6","border-radius":"8px","border-left":"4px solid #faad14"}},[oe("h4",{style:{margin:"0 0 8px 0",color:"#fa8c16"}},"ä½¿ç”¨è¯´æ˜"),oe("ul",{style:{margin:"0","padding-left":"20px",color:"#666"}},[oe("li",null,"æ­¤ç¤ºä¾‹ä½¿ç”¨æ¨¡æ‹Ÿè¯­éŸ³è¯†åˆ«ï¼Œæ— éœ€çœŸå® API é…ç½®"),oe("li",null,"ç‚¹å‡»éº¦å…‹é£æŒ‰é’®åä¼šæ¨¡æ‹Ÿè¯­éŸ³è¯†åˆ«è¿‡ç¨‹ï¼Œå±•ç¤ºä¸­é—´ç»“æœå’Œæœ€ç»ˆç»“æœ"),oe("li",null,[Fe("å¦‚éœ€æ¥å…¥çœŸå®çš„è¯­éŸ³è¯†åˆ«æœåŠ¡ï¼ˆé˜¿é‡Œäº‘ç­‰ï¼‰ï¼Œè¯·å‚è€ƒ "),oe("code",null,"speechHandlers.ts"),Fe(" ä¸­çš„å®ç°ç¤ºä¾‹")]),oe("li",null,"æ”¯æŒè‡ªå®šä¹‰è¯­éŸ³å¤„ç†å™¨ï¼Œå®ç°ä»»æ„ç¬¬ä¸‰æ–¹è¯­éŸ³è¯†åˆ«æœåŠ¡çš„é›†æˆ")])],-1))]))}});export{vr as default};
